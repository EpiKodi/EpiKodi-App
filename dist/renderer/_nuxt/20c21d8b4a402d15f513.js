(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{384:function(t,e,o){var content=o(424);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("71701569",content,!0,{sourceMap:!1})},423:function(t,e,o){"use strict";var r=o(384);o.n(r).a},424:function(t,e,o){(e=o(11)(!1)).push([t.i,":focus{outline:none}body{margin:0!important;font-family:BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;color:#dfdfdf;font-size:16px}.back-btn{margin-top:10px;margin-left:10px;flex-direction:row}.center,.my-video{margin:auto}.center{width:50%}.video-title{margin-left:15px;text-align:center}.my-cover{margin-bottom:15px;width:400px}",""]),t.exports=e},440:function(t,e,o){"use strict";o.r(e);o(342);var r={components:{VuetifyAudio:function(){return o.e(1).then(o.bind(null,431))}},validate:function(t){t.params;return!0},data:function(){return{title:this.$route.params.title,image:this.$route.params.image,media:this.$route.params.media,controls:"controls",autoplay:!0,stream:!1,watcher:!1}},created:function(){null!=this.$route.params.id&&(this.media="https://epi-kodi.herokuapp.com/file/"+this.$route.params.id+"?token="+this.$store.state.token)},mounted:function(){this.socket=this.$nuxtSocket({channel:"/"}),this.socket.emit("join",{token:this.$store.state.token}),1==this.$route.params.stream&&(this.stream=!0,this.startStream()),1==this.$route.params.watcher&&(this.controls=!1,this.autoplay=!1,this.socket.on("media_update",(function(data){console.log("socket media update");var t=document.querySelector("#video");console.log(t),t.currentTime=data.timer,data.play?t.play():t.pause()})))},beforeDestroy:function(){1==this.stream&&this.stopStream()},layout:"player",methods:{startStream:function(){var t=document.querySelector("#video");t.onplay=this.mediaUpdate,t.onpause=this.mediaUpdate,fetch("https://epi-kodi.herokuapp.com/stream/"+this.$route.params.id,{method:"post",headers:{Authorization:this.$store.state.token}})},stopStream:function(){fetch("https://epi-kodi.herokuapp.com/stream",{method:"delete",headers:{Authorization:this.$store.state.token}})},mediaUpdate:function(){var t=document.querySelector("#video");if(t){var e=t.currentTime,o=!t.paused;this.socket.emit("media_update",{token:this.$store.state.token,timer:e,play:o,id:this.$route.params.id})}}}},n=(o(423),o(63)),c=o(89),l=o.n(c),d=o(388),m=o(349),h=o(137),f=o(374),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{staticClass:"my-container",attrs:{fluid:"","fill-height":""}},[o("video",{staticClass:"video-js my-video",attrs:{id:"video",controls:t.controls,autoplay:t.autoplay,preload:"auto",height:"997px","data-setup":"{}"}},[o("source",{attrs:{src:t.media,type:"video/mp4"}})]),t._v(" "),o("v-row",{staticStyle:{position:"absolute","margin-top":"10px","margin-left":"10px"}},[o("v-btn",{attrs:{to:"/tab/video",color:"#FFF"}},[o("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left-bold")]),t._v("Retour\n    ")],1),t._v(" "),o("h1",{staticClass:"video-title"},[t._v(t._s(t.title))])],1)],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VBtn:d.a,VContainer:m.a,VIcon:h.a,VRow:f.a})}}]);